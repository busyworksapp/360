{% extends "base.html" %}

{% block title %}Contact Us - 360Degree Supply{% endblock %}

{% block extra_css %}
<style>
    /* D365 Contact Page Styling */
    
    .page-header-d365 {
        background: linear-gradient(135deg, #DAA520 0%, #B8860B 100%);
        color: white;
        padding: 48px 0;
        text-align: center;
        margin-bottom: 40px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .page-header-d365 h1 {
        font-size: 32px;
        font-weight: 600;
        margin-bottom: 12px;
        color: white;
    }

    .page-header-d365 p {
        font-size: 16px;
        margin-bottom: 0;
        opacity: 0.95;
        color: white;
    }

    /* Contact Container */
    .contact-container-d365 {
        background-color: #1C1C1C;
        padding: 40px 0 60px;
    }

    /* Info Card - D365 */
    .info-card-d365 {
        background: #353535;
        border: 1px solid #4A4A4A;
        border-radius: 2px;
        padding: 32px 24px;
        box-shadow: 0 1.6px 3.6px 0 rgba(0,0,0,.132), 0 0.3px 0.9px 0 rgba(0,0,0,.108);
        height: 100%;
    }

    .info-card-d365 h4 {
        font-size: 18px;
        font-weight: 600;
        color: #FFFFFF;
        margin-bottom: 24px;
    }

    .info-card-d365 h4 i {
        color: #DAA520;
        margin-right: 8px;
    }

    .info-section-d365 {
        margin-bottom: 28px;
    }

    .info-section-d365:last-of-type {
        margin-bottom: 0;
    }

    .info-section-d365 h6 {
        font-size: 14px;
        font-weight: 600;
        color: #DAA520;
        margin-bottom: 8px;
    }

    .info-section-d365 h6 i {
        margin-right: 8px;
    }

    .info-section-d365 p {
        font-size: 12px;
        color: #C0C0C0;
        margin: 0;
        line-height: 1.6;
    }

    .info-section-d365 a {
        color: #DAA520;
        text-decoration: none;
    }

    .info-section-d365 a:hover {
        text-decoration: underline;
    }

    /* Social Links */
    .social-links-d365 {
        display: flex;
        gap: 8px;
        margin-top: 16px;
    }

    .social-btn-d365 {
        width: 40px;
        height: 40px;
        border: 1px solid #DAA520;
        border-radius: 2px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #DAA520;
        text-decoration: none;
        transition: all 0.2s ease;
        font-size: 16px;
    }

    .social-btn-d365:hover {
        background: #DAA520;
        color: white;
    }

    /* Form Card - D365 */
    .form-card-d365 {
        background: #353535;
        border: 1px solid #4A4A4A;
        border-radius: 2px;
        padding: 32px 24px;
        box-shadow: 0 1.6px 3.6px 0 rgba(0,0,0,.132), 0 0.3px 0.9px 0 rgba(0,0,0,.108);
    }

    .form-card-d365 h4 {
        font-size: 18px;
        font-weight: 600;
        color: #FFFFFF;
        margin-bottom: 24px;
    }

    .form-card-d365 h4 i {
        color: #DAA520;
        margin-right: 8px;
    }

    /* Form Controls - D365 */
    .form-label-d365 {
        font-size: 12px;
        font-weight: 600;
        color: #FFFFFF;
        margin-bottom: 6px;
        display: block;
    }

    .form-control-d365 {
        width: 100%;
        padding: 8px 12px;
        font-size: 12px;
        color: #FFFFFF;
        background: #353535;
        border: 1px solid #808080;
        border-radius: 2px;
        transition: all 0.2s ease;
    }

    .form-control-d365:focus {
        outline: none;
        border-color: #DAA520;
        box-shadow: 0 0 0 1px #DAA520;
    }

    .form-control-d365::placeholder {
        color: #808080;
    }

    textarea.form-control-d365 {
        resize: vertical;
        min-height: 100px;
    }

    /* Checkboxes - D365 */
    .form-check-d365 {
        display: flex;
        align-items: center;
        margin-bottom: 12px;
    }

    .form-check-d365 input[type="checkbox"] {
        width: 16px;
        height: 16px;
        margin-right: 8px;
        cursor: pointer;
    }

    .form-check-d365 label {
        font-size: 12px;
        color: #FFFFFF;
        margin: 0;
        cursor: pointer;
    }

    .form-check-d365 label i {
        color: #DAA520;
        margin-right: 4px;
    }

    /* Buttons - D365 */
    .btn-d365-primary {
        padding: 10px 24px;
        font-size: 14px;
        font-weight: 600;
        background: #DAA520;
        color: white;
        border: none;
        border-radius: 2px;
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .btn-d365-primary:hover {
        background: #B8860B;
    }

    .btn-d365-secondary {
        padding: 10px 24px;
        font-size: 14px;
        font-weight: 600;
        background: #353535;
        color: #FFFFFF;
        border: 1px solid #808080;
        border-radius: 2px;
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .btn-d365-secondary:hover {
        background: #2C2C2C;
        border-color: #FFFFFF;
    }

    /* Alerts - D365 */
    .alert-d365-success {
        background: #4CAF50 !important;
        border: 1px solid #4CAF50;
        border-left: 4px solid #4CAF50;
        border-radius: 2px;
        padding: 12px 16px;
        margin-bottom: 20px;
        color: #FFFFFF;
        font-size: 12px;
        display: none;
    }

    .alert-d365-success i {
        color: #4CAF50;
        margin-right: 8px;
    }

    .alert-d365-error {
        background: #f44336 !important;
        border: 1px solid #f44336;
        border-left: 4px solid #f44336;
        border-radius: 2px;
        padding: 12px 16px;
        margin-bottom: 20px;
        color: #FFFFFF;
        font-size: 12px;
        display: none;
    }

    .alert-d365-error i {
        color: #f44336;
        margin-right: 8px;
    }

    .alert-d365-info {
        background: #2C2C2C !important;
        border: 1px solid #DAA520;
        border-left: 4px solid #DAA520;
        border-radius: 2px;
        padding: 16px 20px;
        margin-top: 24px;
        color: #FFFFFF;
        font-size: 12px;
        box-shadow: 0 1.6px 3.6px 0 rgba(0,0,0,.132), 0 0.3px 0.9px 0 rgba(0,0,0,.108);
    }

    .alert-d365-info i {
        color: #DAA520;
        margin-right: 8px;
    }

    .alert-d365-info strong {
        font-weight: 600;
    }

    /* Divider */
    .divider-d365 {
        height: 1px;
        background: #4A4A4A;
        margin: 24px 0;
    }
</style>
{% endblock %}

{% block content %}
    <!-- Page Header -->
    <div class="page-header-d365">
        <div class="container">
            <h1>Contact Us</h1>
            <p>We'd love to hear from you. Get in touch with us today.</p>
        </div>
    </div>

    <!-- Contact Content -->
    <div class="contact-container-d365">
        <div class="container">
            <div class="row">
                <!-- Contact Information -->
                <div class="col-md-4 mb-4">
                    <div class="info-card-d365">
                        <h4>
                            <i class="fas fa-info-circle"></i> Contact Information
                        </h4>
                        
                        {% if company_info %}
                            <!-- Address -->
                            <div class="info-section-d365">
                                <h6>
                                    <i class="fas fa-map-marker-alt"></i> Address
                                </h6>
                                <p>{{ company_info.address or 'Address not available' }}</p>
                            </div>

                            <!-- Phone -->
                            <div class="info-section-d365">
                                <h6>
                                    <i class="fas fa-phone"></i> Phone
                                </h6>
                                <p>
                                    <a href="tel:{{ company_info.phone }}">
                                        {{ company_info.phone or 'Phone not available' }}
                                    </a>
                                </p>
                            </div>

                            <!-- Email -->
                            <div class="info-section-d365">
                                <h6>
                                    <i class="fas fa-envelope"></i> Email
                                </h6>
                                <p>
                                    <a href="mailto:{{ company_info.email }}">
                                        {{ company_info.email or 'Email not available' }}
                                    </a>
                                </p>
                            </div>

                            <!-- Business Hours -->
                            {% if company_info.business_hours %}
                            <div class="info-section-d365">
                                <h6>
                                    <i class="fas fa-clock"></i> Business Hours
                                </h6>
                                <p>{{ company_info.business_hours }}</p>
                            </div>
                            {% endif %}
                        {% else %}
                            <p style="text-align: center; color: #C0C0C0; font-size: 12px;">Contact information not available</p>
                        {% endif %}

                        <!-- Follow Us -->
                        <div class="divider-d365"></div>
                        <h6 style="font-size: 14px; font-weight: 600; color: #DAA520; margin-bottom: 12px;">
                            <i class="fas fa-share-alt"></i> Follow Us
                        </h6>
                        <div class="social-links-d365">
                            <a href="#" class="social-btn-d365" title="Facebook">
                                <i class="fab fa-facebook-f"></i>
                            </a>
                            <a href="#" class="social-btn-d365" title="Twitter">
                                <i class="fab fa-twitter"></i>
                            </a>
                            <a href="#" class="social-btn-d365" title="LinkedIn">
                                <i class="fab fa-linkedin-in"></i>
                            </a>
                            <a href="#" class="social-btn-d365" title="Instagram">
                                <i class="fab fa-instagram"></i>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Contact Form -->
                <div class="col-md-8">
                    <div class="form-card-d365">
                        <h4>
                            <i class="fas fa-envelope-open"></i> Send us a Message
                        </h4>
                        
                        <form id="contactForm" method="POST" action="/api/contact">
                            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="name" class="form-label-d365">Full Name *</label>
                                    <input type="text" class="form-control-d365" id="name" name="name" placeholder="Your full name" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="email" class="form-label-d365">Email Address *</label>
                                    <input type="email" class="form-control-d365" id="email" name="email" placeholder="your.email@example.com" required>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="phone" class="form-label-d365">Phone Number *</label>
                                    <input type="tel" class="form-control-d365" id="phone" name="phone" placeholder="+27 123 456 7890" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="subject" class="form-label-d365">Subject</label>
                                    <input type="text" class="form-control-d365" id="subject" name="subject" placeholder="What is this about?">
                                </div>
                            </div>

                            <div class="mb-3">
                                <label for="message" class="form-label-d365">Message *</label>
                                <textarea class="form-control-d365" id="message" name="message" rows="5" placeholder="Tell us more about your inquiry..." required></textarea>
                            </div>

                            <!-- Company/Organization (Optional) -->
                            <div class="mb-3">
                                <label for="company" class="form-label-d365">Company/Organization</label>
                                <input type="text" class="form-control-d365" id="company" name="company" placeholder="Your company name (optional)">
                            </div>

                            <!-- Service Interest (Optional) -->
                            <div class="mb-4">
                                <label class="form-label-d365">Are you interested in any of our services?</label>
                                <div class="form-check-d365">
                                    <input type="checkbox" id="interest_products" name="interest_products" value="Products">
                                    <label for="interest_products">
                                        <i class="fas fa-box"></i> Products
                                    </label>
                                </div>
                                <div class="form-check-d365">
                                    <input type="checkbox" id="interest_services" name="interest_services" value="Services">
                                    <label for="interest_services">
                                        <i class="fas fa-cogs"></i> Services
                                    </label>
                                </div>
                                <div class="form-check-d365">
                                    <input type="checkbox" id="interest_consultation" name="interest_consultation" value="Consultation">
                                    <label for="interest_consultation">
                                        <i class="fas fa-handshake"></i> Consultation
                                    </label>
                                </div>
                            </div>

                            <!-- Success/Error Messages -->
                            <div id="successMessage" class="alert-d365-success">
                                <i class="fas fa-check-circle"></i> Thank you! Your message has been sent successfully. We'll get back to you soon.
                            </div>
                            <div id="errorMessage" class="alert-d365-error">
                                <i class="fas fa-exclamation-circle"></i> There was an error sending your message. Please try again.
                            </div>

                            <!-- Submit Button -->
                            <div style="display: flex; justify-content: flex-end; gap: 12px;">
                                <button type="reset" class="btn-d365-secondary">
                                    <i class="fas fa-redo"></i> Clear Form
                                </button>
                                <button type="submit" class="btn-d365-primary">
                                    <i class="fas fa-paper-plane"></i> Send Message
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- Additional Info -->
                    <div class="alert-d365-info">
                        <i class="fas fa-lightbulb"></i>
                        <strong>Response Time:</strong> We typically respond to inquiries within 24 business hours.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Handle contact form submission
        document.getElementById('contactForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const successMsg = document.getElementById('successMessage');
            const errorMsg = document.getElementById('errorMessage');
            
            // Hide messages
            successMsg.style.display = 'none';
            errorMsg.style.display = 'none';
            
            try {
                const response = await fetch('/api/contact', {
                    method: 'POST',
                    body: formData
                });
                
                if (response.ok) {
                    successMsg.style.display = 'block';
                    this.reset();
                    
                    // Hide success message after 5 seconds
                    setTimeout(() => {
                        successMsg.style.display = 'none';
                    }, 5000);
                } else {
                    errorMsg.style.display = 'block';
                    
                    // Hide error message after 5 seconds
                    setTimeout(() => {
                        errorMsg.style.display = 'none';
                    }, 5000);
                }
            } catch (error) {
                console.error('Error:', error);
                errorMsg.style.display = 'block';
                
                // Hide error message after 5 seconds
                setTimeout(() => {
                    errorMsg.style.display = 'none';
                }, 5000);
            }
        });
    </script>
{% endblock %}
