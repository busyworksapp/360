# Production Environment Configuration Template
# Copy this file to .env and fill in your production values
# IMPORTANT: Never commit .env to version control!

# =============================================================================
# FLASK CONFIGURATION
# =============================================================================
FLASK_ENV=production
FLASK_DEBUG=False

# Generate a strong secret key: python -c "import secrets; print(secrets.token_hex(32))"
SECRET_KEY=your_very_secure_secret_key_here_generate_with_python_secrets_32_chars_minimum

# Session timeout in seconds (86400 = 24 hours)
SESSION_TIMEOUT=86400
PERMANENT_SESSION_LIFETIME=86400

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# Choose ONE of the following:

# Option A: PostgreSQL (RECOMMENDED for production)
DATABASE_URL=postgresql://360degree_user:secure_db_password@localhost:5432/360degree_production

# Option B: SQLite (small deployments only)
# DATABASE_URL=sqlite:///./instance/production.db

# Database connection pooling
SQLALCHEMY_POOL_SIZE=10
SQLALCHEMY_POOL_RECYCLE=3600
SQLALCHEMY_ECHO=False

# =============================================================================
# STRIPE PAYMENT GATEWAY (https://dashboard.stripe.com)
# =============================================================================
# Get these from Stripe Dashboard > Developers > API keys

# Publishable key (shown in frontend, safe to expose)
STRIPE_PUBLIC_KEY=pk_live_YOUR_STRIPE_PUBLISHABLE_KEY_HERE

# Secret key (NEVER expose, backend only)
STRIPE_SECRET_KEY=sk_live_YOUR_STRIPE_SECRET_KEY_HERE

# Webhook signing secret (for verifying webhooks)
# Get from Dashboard > Developers > Webhooks > Signing secret
STRIPE_WEBHOOK_SECRET=whsec_YOUR_STRIPE_WEBHOOK_SECRET_HERE

# =============================================================================
# PAYFAST PAYMENT GATEWAY (South Africa)
# (https://www.payfast.co.za)
# =============================================================================
# Get these from PayFast merchant account > Settings

# Your PayFast merchant ID (numeric)
PAYFAST_MERCHANT_ID=10000100

# Your PayFast merchant key (alphanumeric)
PAYFAST_MERCHANT_KEY=YOUR_PAYFAST_MERCHANT_KEY_HERE

# Your webhook passphrase for signature verification
PAYFAST_PASSPHRASE=YOUR_PAYFAST_PASSPHRASE_HERE

# Mode: 'sandbox' for testing, 'live' for production
PAYFAST_MODE=live

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================
# Enable/disable email sending
SEND_EMAILS=True

# SMTP Server Configuration
# Gmail example: smtp.gmail.com
# Office365: smtp.office365.com
# Other providers: check their documentation
MAIL_SERVER=smtp.gmail.com
MAIL_PORT=587

# Enable TLS for security
MAIL_USE_TLS=True

# Sender email address
MAIL_USERNAME=noreply@360degreesupply.co.za

# For Gmail: Use an App Password (not your regular password)
# Generate at: https://myaccount.google.com/apppasswords
MAIL_PASSWORD=your_app_specific_password_here

# Admin email (receives system notifications)
ADMIN_EMAIL=admin@360degreesupply.co.za

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
# Upload folder path (must be writable by web server user)
UPLOAD_FOLDER=./uploads

# Maximum upload file size (in bytes)
# 52428800 = 50MB
MAX_UPLOAD_SIZE=52428800

# Allowed file extensions for uploads (comma-separated)
ALLOWED_EXTENSIONS=jpg,jpeg,png,gif,pdf,doc,docx

# =============================================================================
# SECURITY SETTINGS (IMPORTANT!)
# =============================================================================
# CORS (Cross-Origin Resource Sharing)
# List your allowed domains (comma-separated)
CORS_ORIGINS=https://360degreesupply.co.za,https://www.360degreesupply.co.za

# Session cookie security
# In production, set to True
SESSION_COOKIE_SECURE=True

# Prevent JavaScript access to session cookie
SESSION_COOKIE_HTTPONLY=True

# SameSite setting: 'Lax', 'Strict', or 'None'
SESSION_COOKIE_SAMESITE=Lax

# API rate limiting (requests per minute per IP)
RATE_LIMIT_PER_MINUTE=100

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log file path (must be writable by web server user)
LOG_FILE=/var/log/360degree/app.log

# Maximum log file size before rotation (10485760 = 10MB)
LOG_MAX_SIZE=10485760

# Number of backup log files to keep
LOG_BACKUP_COUNT=10

# =============================================================================
# CACHING CONFIGURATION
# =============================================================================
# Cache type: 'simple' (in-memory), 'redis' (distributed)
CACHE_TYPE=simple

# Default cache timeout in seconds (300 = 5 minutes)
CACHE_DEFAULT_TIMEOUT=300

# Redis configuration (only if CACHE_TYPE=redis)
REDIS_URL=redis://localhost:6379/0

# =============================================================================
# MONITORING AND ANALYTICS (Optional)
# =============================================================================
# Enable monitoring
ENABLE_MONITORING=True

# Sentry error tracking (optional)
# SENTRY_DSN=https://your-sentry-key@sentry.io/project-id

# =============================================================================
# MAINTENANCE MODE (For deployments)
# =============================================================================
# Set to True during maintenance, False for normal operation
MAINTENANCE_MODE=False

# Message shown during maintenance
MAINTENANCE_MESSAGE=System is under maintenance. Please try again later.

# =============================================================================
# TIMEZONE
# =============================================================================
# Server timezone (important for consistent timestamps)
TIMEZONE=Africa/Johannesburg

# =============================================================================
# DEBUG AND DEVELOPMENT SETTINGS (NEVER SET IN PRODUCTION)
# =============================================================================
# IMPORTANT: Keep these False in production!
FLASK_DEBUG=False
SQLALCHEMY_ECHO=False
TESTING=False

# =============================================================================
# STRIPE TESTING MODE (Development only)
# =============================================================================
# For development/testing, use test mode keys:
# STRIPE_PUBLIC_KEY=pk_test_...
# STRIPE_SECRET_KEY=sk_test_...

# Test card numbers (development only):
# Visa: 4242 4242 4242 4242
# Visa (declined): 4000 0000 0000 0002
# Amex: 3782 822463 10005
# Expiry: Any future date
# CVC: Any 3 digits

# =============================================================================
# DOCUMENTATION AND REFERENCE
# =============================================================================
# Configuration Guide: See DEPLOYMENT_GUIDE.md
# API Reference: See API_REFERENCE_COMPLETE.md
# Troubleshooting: See TROUBLESHOOTING_GUIDE.md
# Architecture: See ARCHITECTURE_GUIDE.md

# =============================================================================
# QUICK VALIDATION CHECKLIST
# =============================================================================
# After filling this file, verify:
# [ ] FLASK_ENV=production (never debug)
# [ ] SECRET_KEY is strong (32+ characters)
# [ ] DATABASE_URL is correct and reachable
# [ ] STRIPE_SECRET_KEY starts with sk_live_
# [ ] PAYFAST_MERCHANT_ID is set
# [ ] MAIL_PASSWORD is an app-specific password (not your account password)
# [ ] CORS_ORIGINS includes your domain
# [ ] SESSION_COOKIE_SECURE=True
# [ ] LOG_FILE path exists and is writable
# [ ] .env file is added to .gitignore (NEVER commit!)
# [ ] All required variables are set (no empty values)

# =============================================================================
# AFTER SETUP
# =============================================================================
# 1. Run: python init_production.py
# 2. Run tests: pytest test_payments.py -v
# 3. Start app: gunicorn -w 4 -b 0.0.0.0:8000 app:app
# 4. Verify webhooks: Check Stripe and PayFast dashboards
# 5. Test payment flow: Process a test payment
# 6. Monitor logs: tail -f /var/log/360degree/app.log

# =============================================================================
# SUPPORT
# =============================================================================
# For configuration help, see:
# - DEPLOYMENT_GUIDE.md (complete deployment instructions)
# - TROUBLESHOOTING_GUIDE.md (common issues and solutions)
# - Email: admin@360degreesupply.co.za
